<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cogntio+ DAST-10 Screening Tool</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f9;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #2c3e50;
      color: white;
      padding: 1rem;
      text-align: center;
    }

    main {
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h2, h3 {
      color: #2c3e50;
    }

    .section {
      margin-bottom: 2rem;
    }

    label {
      display: block;
      margin: 1rem 0 0.5rem;
    }

    select, input[type="text"], input[type="number"] {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    input[type="checkbox"] {
      margin-right: 0.5rem;
    }

    button {
      background-color: #2980b9;
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }

    .results {
      background: #ecf0f1;
      padding: 1rem;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Drug Abuse Screening Test (DAST-10)</h1>
  </header>
  <main>
    <div class="section">
      <p><strong>The following questions concern information about your possible involvement with drugs (not including alcoholic beverages) during the past 12 months.</strong></p>
      <p>"Drug abuse" refers to (1) the use of prescribed or over‐the‐counter drugs in excess of the directions, and (2) any nonmedical use of drugs. The various classes of drugs may include cannabis (marijuana, hashish), solvents (e.g., paint thinner), tranquilizers (e.g., Valium), barbiturates, cocaine, stimulants (e.g., speed), hallucinogens (e.g., LSD), or narcotics (e.g., heroin). <strong>Remember: These questions do NOT refer to alcoholic beverages.</strong></p>
      <p>Please answer every question. If you have difficulty with a statement, choose the response that is mostly right.</p>
    </div>

    <form id="assessmentForm">
      <div class="section">
        <label for="name">Full Name:</label>
        <input type="text" id="name" name="name" required>

        <label for="age">Age:</label>
        <input type="number" id="age" name="age" required>
      </div>

      <div class="section" id="questions"></div>

      <div class="section">
        <label><input type="checkbox" id="consent" required> I confirm that I understand the purpose of this screening tool and consent to its use for self-assessment only.</label>
      </div>

      <button type="button" onclick="submitAssessment()">Submit Assessment</button>
    </form>

    <div class="section results" id="results" style="display:none;"></div>
  </main>

  <script>
    const questions = [
      "1. Have you used drugs other than those required for medical reasons?",
      "2. Do you abuse more than one drug at a time?",
      "3. Are you unable to stop abusing drugs when you want to?",
      "4. Have you ever had blackouts or flashbacks as a result of drug use?",
      "5. Do you ever feel bad or guilty about your drug use?",
      "6. Does your spouse (or parents) ever complain about your involvement with drugs?",
      "7. Have you neglected your family because of your use of drugs?",
      "8. Have you engaged in illegal activities in order to obtain drugs?",
      "9. Have you ever experienced withdrawal symptoms (felt sick) when you stopped taking drugs?",
      "10. Have you had medical problems as a result of your drug use (e.g., memory loss, hepatitis, convulsions, bleeding)?"
    ];

    const questionContainer = document.getElementById("questions");
    questions.forEach((q, i) => {
      const id = `q_${i}`;
      questionContainer.innerHTML += `
        <label for="${id}">${q}</label>
        <select id="${id}" name="${id}">
          <option value="0">No</option>
          <option value="1">Yes</option>
        </select>
      `;
    });

    function submitAssessment() {
      const name = document.getElementById("name").value.trim();
      const age = document.getElementById("age").value.trim();
      const consent = document.getElementById("consent").checked;

      if (!name || !age || !consent) {
        alert("Please fill in your name, age, and confirm consent before proceeding.");
        return;
      }

      let score = 0;
      for (let i = 0; i < 10; i++) {
        const val = parseInt(document.getElementById(`q_${i}`).value);
        if (i === 2) score += val === 0 ? 1 : 0; // Question 3 reverse scored
        else score += val;
      }

      let interpretation = "";
      if (score === 0) {
        interpretation = "No problems reported. Suggested Action: None at this time.";
      } else if (score <= 2) {
        interpretation = "Low level. Suggested Action: Monitor and re-assess at a later date.";
      } else if (score <= 5) {
        interpretation = "Moderate level. Suggested Action: Further investigation recommended.";
      } else if (score <= 8) {
        interpretation = "Substantial level. Suggested Action: Intensive assessment needed.";
      } else {
        interpretation = `Severe level. Suggested Action: Intensive assessment urgently needed.<br><br><strong>Referral to Treatment:</strong><br>
        <ol>
          <li><strong>Raise the Subject:</strong> Explain your role, ask permission to discuss drug use, ask about usage patterns, explore concerns, listen carefully.</li>
          <li><strong>Provide Feedback:</strong> Explain DAST score and consequences, elicit reaction, connect to health/social/work impacts.</li>
          <li><strong>Enhance Motivation:</strong> Summarize findings and express concern, explore patient readiness and interest in referral using readiness ruler and pros/cons discussion.</li>
          <li><strong>Negotiate Plan:</strong> If not ready, provide materials and schedule follow-up. If ready, explore treatment options and offer warm handoff to behavioral specialist or program.</li>
        </ol>`;
      }

      document.getElementById("results").style.display = "block";
      document.getElementById("results").innerHTML = `<h3>Assessment Results for ${name}, Age ${age}</h3><p><strong>Score:</strong> ${score}</p><p>${interpretation}</p>`;
      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
  </script>
</body>
</html>
